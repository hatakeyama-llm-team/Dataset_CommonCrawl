conda create -n crawl -y
conda activate crawl
conda install pip
pip -r requirements.txt

#torch
#pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

#mecab 日本語の解析に使います
sudo apt install mecab -y
sudo apt install libmecab-dev -y
sudo apt install mecab-ipadic-utf8 -y

#fasttext 記事のフィルタリングに使います
pip install gensim
cd preprocess_data/mc4s/annotations/text_labels/
wget https://dl.fbaipublicfiles.com/fasttext/vectors-crawl/cc.ja.300.bin.gz
gzip -d cc.ja.300.bin.gz

#kenlm  warcファイルの解析に使います
#https://zenn.dev/syoyo/articles/529ce949121ca4
sudo apt install build-essential cmake libboost-system-dev libboost-thread-dev libboost-program-options-dev libboost-test-dev libeigen3-dev zlib1g-dev libbz2-dev liblzma-dev
pip install https://github.com/kpu/kenlm/archive/master.zip
python -m pip install sentencepiece "protobuf<3.20.*"
mkdir -p extract_data/warc/data/lm_sp
wget -c  -P extract_data/warc/data/lm_sp http://dl.fbaipublicfiles.com/cc_net/lm/ja.arpa.bin
wget -c  -P extract_data/warc/data/lm_sp http://dl.fbaipublicfiles.com/cc_net/lm/ja.sp.model